# 🔍 어제 가입한 회원 데이터 확인 방법

## 빠른 확인 방법

### 방법 1: API로 확인 (가장 빠름)

배포된 서비스 URL에서 다음 주소로 접속:
```
https://[서비스URL]/api/admin/db-status
```

예시:
```
https://your-app.railway.app/api/admin/db-status
```

**결과 예시:**
```json
{
  "success": true,
  "stats": {
    "database": "PostgreSQL (Railway)",
    "users": {
      "total": 5,
      "recent": [
        {
          "userId": 1,
          "name": "홍길동",
          "phone": "010-1234-5678",
          "createdAt": "2024-01-15T10:30:00.000Z"
        }
      ]
    },
    "orders": {
      "total": 10,
      "recent": [...]
    },
    "menu": {
      "total": 25
    }
  }
}
```

### 방법 2: Railway에서 직접 확인

1. Railway 대시보드 접속
2. 프로젝트 선택
3. **PostgreSQL 서비스** 클릭
4. **Data** 탭 → **Query** 클릭
5. 다음 쿼리 실행:

```sql
-- 전체 회원 수
SELECT COUNT(*) as total_users FROM users;

-- 최근 가입 회원 (최신 10명)
SELECT "userId", name, phone, "createdAt"
FROM users 
ORDER BY "createdAt" DESC 
LIMIT 10;
```

---

## 데이터가 없는 경우

### 원인 분석

1. **데이터베이스 서비스가 새로 생성됨**
   - Railway에서 PostgreSQL 서비스를 삭제하고 새로 만든 경우
   - 새 프로젝트를 만들고 데이터베이스를 새로 생성한 경우

2. **환경 변수가 다른 데이터베이스를 가리킴**
   - `DATABASE_URL`이 다른 PostgreSQL 서비스를 가리키는 경우

3. **데이터베이스가 리셋됨**
   - Railway에서 데이터베이스를 수동으로 리셋한 경우

---

## 해결 방법

### 1. 데이터베이스 확인

Railway → PostgreSQL → **Data** → **Query**에서:
```sql
-- 테이블 목록 확인
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public';
```

### 2. 환경 변수 확인

Railway → **Variables** 탭에서:
- `DATABASE_URL` 확인
- 여러 PostgreSQL 서비스가 있으면 올바른 것을 사용하는지 확인

### 3. 서버 로그 확인

Railway → **Deployments** → **View Logs**에서:
- "✅ PostgreSQL 데이터베이스 사용 (Railway)" 메시지 확인
- 데이터베이스 연결 오류 확인

---

## 데이터 복구

### 백업이 있는 경우

1. Railway → PostgreSQL → **Data** → **Backups**
2. 백업 파일 다운로드
3. 복원

### 백업이 없는 경우

**복구 불가능** - 새로 시작해야 합니다:
- 회원 데이터: 복구 불가 (재가입 필요)
- 주문 데이터: 복구 불가
- 메뉴 데이터: 자동으로 생성됨 (25개)

---

## 앞으로 데이터 보존 방법

### 1. 정기 백업
- Railway → PostgreSQL → **Data** → **Backup** 클릭
- 주기적으로 백업 다운로드 (일주일마다 권장)

### 2. 데이터베이스 서비스 삭제 금지
- Railway에서 PostgreSQL 서비스를 **절대 삭제하지 마세요**
- 삭제하면 모든 데이터가 사라집니다

### 3. 환경 변수 확인
- `DATABASE_URL`이 변경되지 않았는지 확인
- 여러 프로젝트를 사용할 때 주의

---

## 빠른 확인 명령어

### 브라우저에서
```
https://[서비스URL]/api/admin/db-status
```

### curl 명령어
```bash
curl https://[서비스URL]/api/admin/db-status
```

---

**지금 바로 확인해보세요! 🔍**

