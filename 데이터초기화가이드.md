# 🗑️ 가라 데이터 삭제 가이드

## ✅ 완료된 작업

1. **테이블 자동 삭제 비활성화**
   - 프로덕션 모드에서는 테이블이 자동으로 삭제되지 않음
   - 실제 데이터 보존

2. **테스트 데이터 자동 생성 비활성화**
   - 프로덕션 모드에서는 테스트 데이터가 자동 생성되지 않음
   - 실제 가입 데이터만 저장

3. **데이터 삭제 스크립트 제공**
   - 테스트 데이터만 선택 삭제
   - 전체 데이터 삭제 (선택적)

---

## 🗑️ 가라 데이터 삭제 방법

### 방법 1: 테스트 데이터만 삭제 (권장)

```bash
npm run clear-test
```

**삭제 대상:**
- 테스트 사용자 (010-0000-0000 등)
- 테스트 이름 포함 사용자
- 테스트 주문
- 관련 포인트, 쿠폰, 즐겨찾기 등

**유지:**
- 실제 가입 사용자
- 실제 주문
- 메뉴 데이터

---

### 방법 2: 모든 사용자/주문 데이터 삭제

```bash
npm run clear-all
```

**삭제 대상:**
- 모든 사용자
- 모든 주문
- 모든 포인트 내역
- 모든 쿠폰 사용 내역
- 모든 즐겨찾기
- 모든 주소록
- 모든 리뷰

**유지:**
- 메뉴 데이터
- 쿠폰 정의 (선택적)

---

## 📋 삭제 후 확인

### 1. 데이터 확인
```bash
# SQLite인 경우
sqlite3 backend/restaurant.db
SELECT COUNT(*) FROM users;
SELECT COUNT(*) FROM orders;
```

### 2. 실제 가입 테스트
1. 회원가입 테스트
2. 주문 생성 테스트
3. 데이터 확인

---

## ⚙️ 환경 변수 설정

### 개발 모드에서 테스트 데이터 생성하려면:
```bash
NODE_ENV=development
GENERATE_TEST_DATA=true
```

### 개발 모드에서 테이블 초기화하려면:
```bash
NODE_ENV=development
RESET_DB=true
```

---

## 🎯 프로덕션 모드 (기본)

- ✅ 테이블 자동 삭제 안 함
- ✅ 테스트 데이터 자동 생성 안 함
- ✅ 실제 가입 데이터만 저장
- ✅ 메뉴 데이터 유지

---

## 💡 주의사항

1. **데이터 백업 권장**
   - 삭제 전 백업: `npm run backup`

2. **Railway PostgreSQL**
   - PostgreSQL 사용 시 스크립트 수정 필요
   - 또는 Railway 대시보드에서 직접 삭제

3. **메뉴 데이터**
   - 메뉴는 항상 유지됨
   - 메뉴만 초기화하려면 별도 작업 필요

---

**이제 실제 가입 데이터만 저장됩니다!** ✅

