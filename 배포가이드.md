# 🚀 배포 가이드

## ✅ 배포 준비 완료

모든 기능이 구현되었으니 Railway에 배포할 수 있습니다!

---

## 📋 배포 전 체크리스트

### 1. Git 커밋
```bash
git add .
git commit -m "모든 기능 구현 완료: 주문 취소, 리뷰, 알림톡, 주소록, 재주문, 주문 수정, 쿠폰 자동 적용, 배달 예상 시간, 메뉴 품절 처리"
git push origin main
```

### 2. Railway 배포 설정

**Railway 대시보드에서 확인:**
- ✅ Node.js 버전: 18.x 이상
- ✅ 시작 명령어: `node server.js` (또는 `npm start`)
- ✅ 작업 디렉토리: `backend`

---

## 🔧 Railway 환경 변수 설정

### 필수 환경 변수

**데이터베이스:**
```
DATABASE_URL=postgresql://... (Railway PostgreSQL 자동 생성)
```

**카카오 알림톡 (선택):**
```
KAKAO_ALIMTALK_API_KEY=your_api_key
KAKAO_ALIMTALK_SECRET=your_secret
KAKAO_PLUS_FRIEND_ID=@시티반점
KAKAO_TEMPLATE_CODE_ORDER=템플릿코드1
KAKAO_TEMPLATE_CODE_DELIVERY=템플릿코드2
KAKAO_TEMPLATE_CODE_COMPLETE=템플릿코드3
KAKAO_TEST_MODE=true (테스트 모드)
```

**프린터 서버 (선택 - 로컬 PC에서 실행):**
```
PRINTER_SERVER_URL=http://your-local-ip:3001
```

**PG 결제 (I'mport):**
```
IMP_KEY=your_imp_key
IMP_SECRET=your_imp_secret
```

---

## 🚀 배포 단계

### 방법 1: Railway GitHub 연동 (추천)

1. **Railway 대시보드 접속**
   - https://railway.app 접속
   - 프로젝트 선택

2. **GitHub 연동**
   - Settings → Connect GitHub
   - 저장소 선택
   - 자동 배포 활성화

3. **환경 변수 설정**
   - Variables 탭에서 환경 변수 추가

4. **배포 확인**
   - Deployments 탭에서 배포 상태 확인
   - 로그 확인

### 방법 2: Railway CLI 사용

```bash
# Railway CLI 설치
npm i -g @railway/cli

# 로그인
railway login

# 프로젝트 연결
railway link

# 배포
railway up
```

---

## 📝 배포 후 확인 사항

### 1. 서버 실행 확인
- Railway 로그에서 "✅ 서버 실행 중" 메시지 확인
- 포트 확인 (Railway 자동 할당)

### 2. 데이터베이스 확인
- PostgreSQL 연결 확인
- 테이블 자동 생성 확인

### 3. 기능 테스트
- [ ] 주문 생성
- [ ] 주문 취소
- [ ] 리뷰 작성
- [ ] 주소록 저장
- [ ] 재주문
- [ ] 주문 수정
- [ ] 쿠폰 자동 적용
- [ ] 메뉴 품절 처리

---

## 🔍 문제 해결

### 배포 실패 시
1. Railway 로그 확인
2. 환경 변수 확인
3. Node.js 버전 확인 (18.x 이상)
4. package.json 의존성 확인

### 데이터베이스 연결 오류
- `DATABASE_URL` 환경 변수 확인
- Railway PostgreSQL 서비스 확인

### 프린터 연결 오류
- 로컬 프린터 서버 실행 확인
- `PRINTER_SERVER_URL` 설정 확인

---

## ✅ 배포 완료!

배포가 완료되면 Railway에서 제공하는 URL로 접속할 수 있습니다.

**예시:** `https://your-app.railway.app`

---

## 📞 추가 도움

문제가 발생하면 Railway 로그를 확인하거나 GitHub Issues에 문의하세요!

