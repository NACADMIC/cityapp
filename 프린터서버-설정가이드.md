# 🖨️ 프린터 서버 설정 가이드

## Railway + 로컬 프린터 서버 구성

### 아키텍처
```
Railway 메인 서버 (데이터베이스, 주문 처리)
    ↓
    HTTP 요청
    ↓
로컬 PC 프린터 서버 (COM2 포트)
    ↓
    인쇄
    ↓
물리적 프린터 (LKT-20)
```

## 설정 방법

### 1단계: 로컬 PC에서 프린터 서버 실행

1. **의존성 설치** (최초 1회)
   - `서버설치.bat` 더블클릭
   - 패키지 설치 완료까지 대기

2. **프린터 서버 시작**
   - `서버시작.bat` 더블클릭
   - 프린터 서버가 시작되면:
     ```
     📡 Railway 서버에서 프린터 요청을 받을 준비 완료!
     PORT: 3001
     프린터: LKT-20 (COM2)
     통신속도: 9600 baud
     ```

3. **로컬 PC IP 주소 확인**
   - Windows 명령 프롬프트에서:
     ```cmd
     ipconfig
     ```
   - IPv4 주소 확인 (예: `192.168.0.100`)

### 2단계: Railway 서버에 프린터 서버 URL 설정

1. **Railway 대시보드 접속**
   - 프로젝트 → 앱 서비스 선택

2. **환경 변수 추가**
   - Variables 탭 클릭
   - "+ New Variable" 클릭
   - Name: `PRINTER_SERVER_URL`
   - Value: `http://로컬PCIP주소:3001`
     - 예: `http://192.168.0.100:3001`
   - "Add" 클릭

3. **재배포**
   - 환경 변수 추가 시 자동 재배포
   - 또는 수동으로 "Redeploy" 실행

### 3단계: 프린터 테스트

1. **Railway 서버에서 프린터 테스트**
   - POS 시스템 → 프린터 테스트 메뉴
   - 또는: `https://your-app-url.railway.app/api/printer/test`

2. **로컬 프린터 서버 확인**
   - 프린터 서버 콘솔 창에서 요청 로그 확인
   - 인쇄 성공/실패 메시지 확인

## 중요 사항

### ✅ 필수 조건
- 로컬 PC와 Railway 서버가 서로 접근 가능해야 함
- 로컬 PC의 방화벽에서 3001번 포트 허용 필요
- 프린터가 COM2 포트에 연결되어 있어야 함

### ⚠️ 주의사항
- 프린터 서버 창을 닫으면 인쇄가 안 됨
- 로컬 PC IP 주소가 변경되면 Railway 환경 변수도 업데이트 필요
- 로컬 PC가 인터넷에 연결되어 있어야 함

## 문제 해결

### 프린터 서버 연결 실패
1. 로컬 PC IP 주소 확인
2. 방화벽 설정 확인 (3001번 포트)
3. Railway 환경 변수 확인

### 프린터 인쇄 실패
1. COM2 포트 확인
2. 프린터 전원 확인
3. 프린터 서버 콘솔 로그 확인

